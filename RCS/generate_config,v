head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2001.04.16.12.07.45;	author matt;	state Exp;
branches;
next	1.1;

1.1
date	2000.05.05.17.01.29;	author matt;	state Exp;
branches;
next	;


desc
@Initial revision.
@


1.2
log
@Added patch for alternate SMTP port.
@
text
@#!/bin/sh -e

#
# Figure out the system's mailname
#

syshostname=`hostname --fqdn`
if ! test -f /etc/mailname
then
	echo "Please enter the mail name of your system."
	echo "This is the hostname portion of the address to be shown"
	echo "on outgoing news and mail messages."
	echo "The default is $syshostname, your system's host name."
	echo
	echo -n "Mail name [$syshostname]: "
	read mailname
	echo

	if test -z "$mailname"
	then
		mailname=$syshostname
	fi
else
	mailname="`head -1 /etc/mailname`"
fi

echo -n "Please enter the SMTP port number [25]: "
read smtpport
if test -z "$smtpport"
then
	mailhub=$mailhub
else
	mailhub="$mailhub:$smtpport"
fi

#
# Generate configuration file
#
if test -s "$1"
then
	echo Configuration file $1 already exists.
	exit 0
fi

cat >>$1 <<EOF
#
# /etc/ssmtp.conf -- a config file for sSMTP sendmail.
#
# The person who gets all mail for userids < 1000
root=postmaster
# The place where the mail goes. The actual machine name is required
# no MX records are consulted. Commonly mailhosts are named mail.domain.com
# The example will fit if you are in domain.com and you mailhub is so named.
mailhub=mail
# Where will the mail seem to come from?
#rewriteDomain=`echo -n $mailname`
# The full hostname
hostname=`hostname --fqdn`
EOF

echo
echo
echo "Please check the configuration file $1 for correctness."
echo
echo
@


1.1
log
@Initial revision
@
text
@d8 15
a22 11
if [ ! -f /etc/mailname ]; then
  echo 'Please enter the "mail name" of your system.  This is the hostname'
  echo 'portion of the address to be shown on outgoing news and mail messages.'
  echo "The default is $syshostname, your system's host name."
  echo
  echo -n "Mail name [$syshostname]: "
  read mailname
  echo
  if [ ! "$mailname" ]; then
    mailname=$syshostname
  fi
d24 1
a24 1
  mailname=`cat /etc/mailname`
d27 8
d39 5
a44 4
if [ -s $1 ]; then
    echo Configuration file $1 already exists.
    exit
fi
d49 1
a49 1
# The person who gets all mail for userids < 10
d65 1
a65 1
echo@
